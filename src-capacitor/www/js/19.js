(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"788b":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"helpdefault"}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"text-h4 xs-text-h4"},[t._v("\n      Задачи по объекту\n    ")]),0===t.statusTasks?a("div",{staticClass:"q-pa-md"},[a("q-skeleton",{attrs:{type:"rect"}})],1):t._e(),2===t.statusTasks?a("div",{staticClass:"q-pa-md"},[a("q-icon",{attrs:{size:"22px",name:"warning",color:"orange"}}),a("span",{staticClass:"text-caption q-ml-sm"},[t._v("Задачи по объекту отсутствуют")])],1):t._e()]),a("transition",{attrs:{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.statusTasks,expression:"statusTasks === 1"}],staticClass:"row q-pl-md q-pr-md"},t._l(t.tasks,(function(s,e){return a("div",{key:e,staticClass:"col col-md-3 col-xs-12 q-mr-md q-mt-md",on:{click:function(a){return t.$router.push("/task/"+s.id)}}},[a("div",{staticClass:"cursor-pointer task q-pa-md"},[a("div",{staticClass:"col text-subtitle1 ellipsis"},[t._v(t._s(s.title))]),a("div",{staticClass:"col text-caption ellipsis",staticStyle:{color:"#848484"}},[t._v(t._s(s.description))]),a("div",{staticClass:"row"},[a("div",{staticClass:"col q-mt-md"},[a("q-chip",{attrs:{color:t.$_checkStatusTask(s.status_id),"text-color":"white"}},[t._v("\n              "+t._s(s.status_name)+"\n            ")])],1),a("div",{staticClass:"row text-right q-mt-md"},[s.staff_photo?a("div",{staticClass:"col"},[a("q-avatar",{staticClass:"q-mr-xs",attrs:{round:"",flat:"",size:"36px"}},[a("q-img",{attrs:{src:t.$store.state.constant.CDN_DOMAIN+s.staff_photo}})],1),a("q-tooltip",{attrs:{"content-class":"bg-blue-6","content-style":"font-size: 13px",offset:[10,10]}},[t._v("\n                "+t._s(s.staff_role)+": "+t._s(s.staff_name)+"\n              ")])],1):t._e(),s.creator_photo?a("div",{staticClass:"col"},[a("q-avatar",{staticClass:"q-mr-xs",attrs:{round:"",flat:"",size:"36px"}},[a("q-img",{attrs:{src:t.$store.state.constant.CDN_DOMAIN+s.creator_photo}})],1),a("q-tooltip",{attrs:{"content-class":"bg-blue-6","content-style":"font-size: 13px",offset:[10,10]}},[t._v("\n                "+t._s(s.creator_role)+": "+t._s(s.creator_name)+"\n              ")])],1):t._e()])])]),a("div",{staticClass:"text-center q-mt-sm text-caption",staticStyle:{color:"#949494"}},[t._v("\n        "+t._s(t._f("dateString2")(s.date_create))+"\n      ")])])})),0)])],1)},i=[],n=a("967e"),r=a.n(n),c=(a("7f7f"),a("96cf"),a("fa84")),o=a.n(c),l={name:"helpdefault",created:function(){this.$_getTasks(),this.$_watching()},data:function(){return{statusTasks:0,tasks:[]}},methods:{$_watching:function(){var t=this;this.$watch("$store.state.user.activeContract",(function(){t.$_getTasks()}))},$_getTasks:function(){var t=this;if(this.$_.isEmpty(this.$store.state.user.activeContract))this.statusTasks=2;else{var s=this.$axios.post("task/list/".concat(this.$store.state.user.activeContract.id));s.then((function(s){t.$_.isEmpty(s.data)?(t.tasks=[],t.statusTasks=2):(t.tasks=s.data,t.$_getUsersTask(),t.statusTasks=1)}))}},$_checkStatusTask:function(t){var s="light-blue-6";switch(t){case 1:s="grey-6";break;case 2:s="light-blue-6";break;case 3:s="green-6";break}return s},$_getUsersTask:function(){var t=this;return o()(r.a.mark((function s(){var a;return r.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=t.tasks,a.forEach((function(s,a){var e=t.$store.dispatch("user/GET_USER",s.creator_id);e.then((function(s){if(s.data){var e=s.data;t.$set(t.tasks[a],"creator_photo",e.photo),t.$set(t.tasks[a],"creator_name",e.name),t.$set(t.tasks[a],"creator_role",e.role_name)}}));var i=t.$store.dispatch("user/GET_USER",s.staff_id);i.then((function(s){if(s.data){var e=s.data;t.$set(t.tasks[a],"staff_photo",e.photo)}}))}));case 2:case"end":return s.stop()}}),s)})))()}}},u=l,d=(a("de8e"),a("2877")),_=a("eebe"),f=a.n(_),p=a("293e"),v=a("0016"),h=a("b047"),m=a("cb32"),k=a("068f"),$=a("05c0"),C=Object(d["a"])(u,e,i,!1,null,null,null);s["default"]=C.exports;f()(C,"components",{QSkeleton:p["a"],QIcon:v["a"],QChip:h["a"],QAvatar:m["a"],QImg:k["a"],QTooltip:$["a"]})},"8a2a":function(t,s,a){},de8e:function(t,s,a){"use strict";var e=a("8a2a"),i=a.n(e);i.a}}]);