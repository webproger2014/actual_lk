(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"6d35":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"q-pa-md q-gutter-sm"},[s("q-dialog",{attrs:{"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.fullscreen,callback:function(e){t.fullscreen=e},expression:"fullscreen"}},[s("q-card",{staticClass:"bg-primary"},[s("q-carousel",{staticClass:"fullscreen",attrs:{swipeable:"",animated:"",arrows:t.arrows,dark:"",infinite:""},on:{input:function(e){return t.bgAd()}},scopedSlots:t._u([{key:"control",fn:function(){return[s("q-carousel-control",{attrs:{position:"top-right",offset:[18,18]}},[s("q-btn",{attrs:{push:"",round:"",dense:"",color:"white","text-color":"primary",icon:"close"},on:{click:function(e){t.fullscreen=!t.fullscreen}}})],1)]},proxy:!0}]),model:{value:t.slide,callback:function(e){t.slide=e},expression:"slide"}},t._l(t.slideItems,(function(e,a){return s("q-carousel-slide",{key:a,class:[t.bgSizeAuto?"auto":""],attrs:{name:a,"img-src":t.$store.state.constant.CDN_DOMAIN+e.url}})})),1)],1)],1)],1)},i=[],r={name:"fullimg",data:function(){return{slide:1,imgW:"",arrows:!0,slideItems:[],bgSizeAuto:!1,fullscreen:!1,statusDisplayDialog:!1}},created:function(){var t=this;this.$watch("$q.screen.width",(function(){t.bgAd()}))},methods:{zoom:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];1===e.length?this.arrows=!1:this.arrows=!0,this.slide=t,this.slideItems=e,this.fullscreen=!0,this.bgAd()},bgAd:function(){var t=this;if(!this.fullscreen)return!1;var e=new Image;e.onload=function(){e.width<window.innerWidth?t.bgSizeAuto=!0:t.bgSizeAuto=!1},e.src=this.$store.state.constant.CDN_DOMAIN+this.slideItems[this.slide].url}}},o=r,n=(s("c6e4"),s("2877")),c=s("eebe"),l=s.n(c),u=s("24e8"),d=s("f09f"),g=s("880c"),m=s("62cd"),p=s("32a7"),f=s("9c40"),h=Object(n["a"])(o,a,i,!1,null,"376411ba",null);e["a"]=h.exports;l()(h,"components",{QDialog:u["a"],QCard:d["a"],QCarousel:g["a"],QCarouselSlide:m["a"],QCarouselControl:p["a"],QBtn:f["a"]})},"6de2":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"q-app"}},[s("div",{staticClass:"q-px-lg q-pa-md"},[s("div",{staticClass:"text-h4 xs-text-h4"},[t._v("\n        Этапы строительства\n    ")]),t.$_.isEmpty(t.$store.state.user.stages)?s("div",{staticClass:"q-pa-md"},[s("q-icon",{attrs:{size:"22px",name:"warning",color:"orange"}}),s("span",{staticClass:"text-caption q-ml-sm"},[t._v("Этапы строительства отсутствуют")])],1):t._e(),s("q-timeline",{attrs:{color:"secondary"}},t._l(t.$store.state.user.stages,(function(e,a){return s("q-timeline-entry",{key:a,attrs:{title:"Этап "+(a+1),subtitle:t._f("dateString2")(e.stage.date_create),icon:"done_all"}},[s("div",[s("p",[t._v(t._s(e.stage.description))]),t.$_.isEmpty(e.photo)?t._e():s("div",{staticClass:"q-col-gutter-md row items-start"},t._l(e.photo,(function(a,i){return s("div",{key:i,staticClass:"col-xs-12 col-sm-6 col-md-4",staticStyle:{"max-width":"300px"}},[s("q-img",{staticClass:"cursor-pointer",attrs:{ratio:16/9,src:t.$store.state.constant.CDN_DOMAIN+a.url300},on:{click:function(s){return t.$refs.fullimg.zoom(i,e.photo)}}})],1)})),0),t.$_.isEmpty(e.video)?t._e():s("q-separator",{staticClass:"q-mt-lg q-mb-lg"}),t.$_.isEmpty(e.video)?t._e():s("div",{staticClass:"q-col-gutter-md row items-start"},t._l(e.video,(function(e,a){return s("div",{key:a,staticClass:"col-xs-12 col-sm-6 col-md-4 video"},[s("videoplay",{attrs:{srcvideo:t.$store.state.constant.CDN_DOMAIN+e.url}})],1)})),0),s("div",{staticClass:"q-mt-lg",staticStyle:{display:"none"}},[s("div",{staticClass:"xs"},[s("q-btn",{attrs:{color:"light-blue-8","icon-right":"send",label:"Задать вопрос"},on:{click:function(e){return t.openDialogMessage(t.stage.title)}}})],1),s("div",{staticClass:"gt-xs"},[s("q-btn",{attrs:{color:"light-blue-8",icon:"mail","icon-right":"send",label:"Задать вопрос"},on:{click:function(e){return t.openDialogMessage(t.stage.title)}}})],1)])],1)])})),1)],1),s("div",{staticClass:"q-pa-md q-gutter-sm"},[s("q-dialog",{attrs:{position:"bottom"},model:{value:t.dialog.message.state,callback:function(e){t.$set(t.dialog.message,"state",e)},expression:"dialog.message.state"}},[s("q-card",{staticClass:"q-pa-sm fit",staticStyle:{"max-width":"700px"}},[s("div",{staticClass:"q-pa-sm"},[s("div",{staticClass:"text-h6"},[t._v("Этап: "+t._s(t.dialog.message.title))])]),s("q-input",{attrs:{filled:"",autogrow:"","bottom-slots":"",label:"Вопрос",counter:"",maxlength:"720",dense:!1,autofocus:""},scopedSlots:t._u([{key:"before",fn:function(){return[s("q-avatar",[s("img",{attrs:{src:t.AVATAR}})])]},proxy:!0},{key:"append",fn:function(){return[""!==t.message.value?s("q-icon",{staticClass:"cursor-pointer",attrs:{name:"close"},on:{click:function(e){t.message.value=""}}}):t._e()]},proxy:!0},{key:"hint",fn:function(){return[t._v("\n                    "+t._s(t.errorMessage.title)+"\n                  ")]},proxy:!0},{key:"after",fn:function(){return[s("q-btn",{directives:[{name:"show",rawName:"v-show",value:!t.createMsg,expression:"!createMsg"}],attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:function(e){return t.sendMessage()}}}),s("q-circular-progress",{directives:[{name:"show",rawName:"v-show",value:t.createMsg,expression:"createMsg"}],staticClass:"q-ma-md",attrs:{indeterminate:"",size:"30px",color:"lime"}})]},proxy:!0}]),model:{value:t.message.value,callback:function(e){t.$set(t.message,"value",e)},expression:"message.value"}})],1)],1)],1),s("fullimg",{ref:"fullimg"})],1)},i=[],r=(s("8e6e"),s("8a81"),s("ac6a"),s("cadf"),s("06db"),s("456d"),s("c47a")),o=s.n(r),n=s("2f62"),c=s("6d35"),l=s("98c8");function u(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?u(Object(s),!0).forEach((function(e){o()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var g={name:"stages",components:{fullimg:c["a"],videoplay:l["a"]},data:function(){return{createMsg:!1,dialog:{message:{state:!1,title:""}},errorMessage:{title:"Введите сообщение",state:!1},message:{value:"",state:!1}}},created:function(){var t=this;this.$_.isEmpty(this.$store.state.user.stages)&&this.$store.dispatch("user/GET_STAGES"),this.$watch("$store.state.user.activeContract",(function(){t.$store.dispatch("user/GET_STAGES")}))},computed:d({},Object(n["b"])({AVATAR:"user/GET_AVATAR"})),methods:{openDialogMessage:function(t){this.dialog.message.title=t,this.dialog.message.state=!0},sendMessage:function(){this.message.value?(this.createMsg=!0,this.successMessage()):this.errorMessage.title="Поле не может быть пустым"},successMessage:function(){var t=this;this.resMessage(),this.$q.notify({position:"top-right",icon:"thumb_up",timeout:15e3,message:"Сообщение отправлено",actions:[{label:"Открыть чат",color:"green",handler:function(){t.$router.push("/chat")}},{icon:"close",color:"red"}]})},resMessage:function(){this.createMsg=!1,this.message.value="",this.dialog.message.title="",this.dialog.message.state=!1}}},m=g,p=s("2877"),f=s("eebe"),h=s.n(f),v=s("0016"),b=s("05eb"),y=s("74af"),_=s("068f"),w=s("eb85"),q=s("9c40"),C=s("24e8"),x=s("f09f"),$=s("27f9"),O=s("cb32"),A=s("58ea"),k=Object(p["a"])(m,a,i,!1,null,null,null);e["default"]=k.exports;h()(k,"components",{QIcon:v["a"],QTimeline:b["a"],QTimelineEntry:y["a"],QImg:_["a"],QSeparator:w["a"],QBtn:q["a"],QDialog:C["a"],QCard:x["a"],QInput:$["a"],QAvatar:O["a"],QCircularProgress:A["a"]})},"98c8":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-xs-12 col-sm-6 col-md-4",attrs:{id:"videoplay"}},[s("div",{staticClass:"item-img relative-position"},[s("video",{staticClass:"position-absolute fit",attrs:{controls:"",src:t.srcvideo}})])])},i=[],r={name:"videoplay",props:["srcvideo","srcimg"],data:function(){return{play:!1}}},o=r,n=s("2877"),c=Object(n["a"])(o,a,i,!1,null,"4ac34982",null);e["a"]=c.exports},acab:function(t,e,s){},c6e4:function(t,e,s){"use strict";var a=s("acab"),i=s.n(a);i.a}}]);