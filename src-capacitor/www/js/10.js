(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"0dad":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"contracts"}},[t.$store.state.user.contractStatus?t._e():a("div",{staticClass:"q-pa-md"},[a("q-icon",{attrs:{size:"22px",name:"warning",color:"orange"}}),a("span",{staticClass:"text-caption q-ml-sm"},[t._v("Договоров нет")])],1),t._l(t.$store.state.user.contract,(function(e,n){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:n,staticClass:"q-pl-xs",attrs:{tag:"label",clickable:""}},[a("q-radio",{attrs:{val:n,color:"orange"},on:{input:t.updateDataByContract},model:{value:t.activeContract,callback:function(e){t.activeContract=e},expression:"activeContract"}}),a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{color:"primary","text-color":"white"}},[a("q-icon",{attrs:{name:"file_copy"}})],1)],1),a("q-item-section",[a("q-item-label",[t._v(t._s(e.contract_name)+" "+t._s(e.id))]),a("q-item-label",{attrs:{caption:""}},[t._v("№ "+t._s(e.contract_number)+" "+t._s(t._f("dateString2")(e.contract_date)))])],1)],1)}))],2)},s=[],i={name:"contracts",data:function(){return{activeContract:0}},created:function(){var t=this;this.activeContract=this.$store.state.user.contractActiveIndex,this.$_.isEmpty(this.$store.state.user.contract)&&this.$store.dispatch("user/GET_DOC_CONTRACT"),!this.$_.isEmpty(this.$store.state.user.activeContract)&&this.$_.isEmpty(this.$store.state.user.contractDocs)&&this.$store.dispatch("user/GET_DOC_CONTRACT"),this.$watch("$store.state.user.activeContract",(function(e){t.$store.dispatch("user/GET_DOC_CONTRACT")})),this.$watch("$store.state.user.contractActiveIndex",(function(){t.activeContract=t.$store.state.user.contractActiveIndex}))},methods:{updateDataByContract:function(){this.$store.dispatch("user/UPDATE_ACTIVE_CONTRACT",this.activeContract),this.$MSG_SUCCESS("Вы перешли на договор: "+this.$store.state.user.activeContract.contract_name)}}},c=i,r=a("2877"),o=a("eebe"),l=a.n(o),u=a("0016"),d=a("66e5"),p=a("3786"),f=a("4074"),h=a("cb32"),m=a("0170"),v=a("714f"),_=Object(r["a"])(c,n,s,!1,null,null,null);e["a"]=_.exports;l()(_,"components",{QIcon:u["a"],QItem:d["a"],QRadio:p["a"],QItemSection:f["a"],QAvatar:h["a"],QItemLabel:m["a"]}),l()(_,"directives",{Ripple:v["a"]})},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"6b12":function(t,e,a){"use strict";var n,s,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container",attrs:{id:"printdoc"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.ts(e)}}},[a("iframe",{ref:"filePrint",staticStyle:{display:"none"},attrs:{src:""}}),a("q-dialog",{attrs:{maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("q-card",{staticClass:"full-width",staticStyle:{overflow:"hidden"}},[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"keyboard_arrow_left"},on:{click:t.closeDialog}}),t._v("\n          Вернуться\n\n          "),a("div",{staticClass:"text-center toolbar-center"},[a("q-btn",{attrs:{flat:"",color:"white",icon:"zoom_out",size:"13px"},on:{click:function(e){t.scale-=.1}}}),t._v("\n            "+t._s((t.scale-1.5).toFixed(1))+"\n            "),a("q-btn",{attrs:{flat:"",color:"white",icon:"zoom_in",size:"13px"},on:{click:function(e){t.scale+=.1}}}),t._v("\n\n            стр "+t._s(t.numPages)+"\n          ")],1)],1),a("div",{staticClass:"pdf-container"},[a("document",t._b({on:{countpages:t.countPages}},"document",{data:t.data,scale:t.scale},!1))],1)],1)],1)],1)},c=[],r=a("967e"),o=a.n(r),l=(a("6762"),a("2fdb"),a("96cf"),a("fa84")),u=a.n(l),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"wrapperiframe",staticClass:"canvas-container text-center"},[a("q-circular-progress",{directives:[{name:"show",rawName:"v-show",value:!t.pages.length,expression:"!pages.length"}],staticClass:"q-ma-md absolute-center",attrs:{indeterminate:"",size:"40px",color:"light-blue-6"}}),t._l(t.pages,(function(e,n){return a("div",{key:n},[a("page",t._b({},"page",{page:e,scale:t.scale},!1))],1)}))],2)},p=[],f=(a("551c"),a("ac6a"),a("cadf"),a("06db"),a("5df3"),a("9511")),h=a.n(f),m=a("f3e3"),v=a.n(m),_={props:["page","scale"],render:function(t){var e=this.canvasAttrs;return t("canvas",{attrs:e})},created:function(){this.viewport=this.page.getViewport({scale:this.scale})},mounted:function(){this.drawPage()},computed:{canvasAttrs:function(){var t=this.viewport,e=t.width,a=t.height,n=this.canvasStyle;return{width:e,height:a,style:n}},canvasStyle:function(){var t=this.actualSizeViewport,e=t.width,a=t.height,n=window.devicePixelRatio||1,s=[e,a].map((function(t){return Math.ceil(t/n)})),i=v()(s,2),c=i[0],r=i[1];return"width: ".concat(c,"px; height: ").concat(r,"px;")},actualSizeViewport:function(){return this.viewport.clone({scale:this.scale-1.5})}},methods:{drawPage:function(){var t=this.viewport,e=this.$el.getContext("2d"),a={canvasContext:e,viewport:t};this.renderTask=this.page.render(a)}}},g=_,C=a("2877"),w=Object(C["a"])(g,n,s,!1,null,"1300dd0b",null),b=w.exports,x={props:["data","scale"],components:{page:b},data:function(){return{pdf:void 0,pages:[]}},created:function(){this.fetchPDF()},methods:{fetchPDF:function(){var t=this;if(this.data){var e={withCredentials:!1};this.data.includes(".pdf")?e["url"]=this.data:e["data"]=atob(this.data),h.a.getDocument(e).promise.then((function(e){t.pdf=e}))}}},watch:{data:function(){this.fetchPDF()},pdf:function(t){var e=this;this.pages=[],this.$emit("countpages",t.numPages);var a=this.$_.range(1,t.numPages+1).map((function(e){return t.getPage(e)}));Promise.all(a).then((function(t){return e.pages=t}))}}},$=x,q=a("eebe"),y=a.n(q),P=a("58ea"),k=Object(C["a"])($,d,p,!1,null,"5dc4132c",null),D=k.exports;y()(k,"components",{QCircularProgress:P["a"]});var T={name:"printdoc",components:{document:D},data:function(){return{dialog:!1,numPages:void 0,srcPdf:"",percentLoad:"",indexLoad:1,scale:3,data:""}},methods:{print:function(t){var e=this.$refs.filePrint;this.srcPdf=encodeURIComponent(t),e.contentWindow.focus(),e.onload=function(){e.contentWindow.print()}},closeDialog:function(){this.dialog=!1,this.data=null,this.numPages=void 0,this.scale=3},open:function(t,e){var a=this;null===t.target.getAttribute("nopen")&&(this.srcPdf=encodeURIComponent(e),this.dialog=!0,this.$nextTick((function(){setTimeout((function(){a.$_loadPdf(e)}),500)})))},$_loadPdf:function(t){var e=this;return u()(o.a.mark((function a(){return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.includes("http")?e.$axios.post("parse/file/pdf",{src:t}).then((function(t){e.data=t.data})):e.data=t;case 1:case"end":return a.stop()}}),a)})))()},countPages:function(t){this.numPages=t}}},E=T,Q=(a("8989"),a("24e8")),A=a("f09f"),I=a("65c6"),O=a("9c40"),S=Object(C["a"])(E,i,c,!1,null,"86849036",null);e["a"]=S.exports;y()(S,"components",{QDialog:Q["a"],QCard:A["a"],QToolbar:I["a"],QBtn:O["a"]})},8989:function(t,e,a){"use strict";var n=a("9f00"),s=a.n(n);s.a},"9f00":function(t,e,a){},f978:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"contract"}},[t._m(0),a("contracts"),a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"text-h5"},[t._v("\n      Документы договора "+t._s(t.$store.state.user.activeContract.contract_number)+"\n    ")])]),t.$store.state.user.contractDocs.length?t._e():a("div",{staticClass:"q-pa-md"},[a("q-icon",{attrs:{size:"22px",name:"warning",color:"orange"}}),a("span",{staticClass:"text-caption q-ml-sm"},[t._v("Документы отсутствуют")])],1),t._l(t.$store.state.user.contractDocs,(function(e,n){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:n,attrs:{clickable:""},on:{click:function(a){return t.$refs.doc.open(a,t.$store.state.constant.CDN_DOMAIN+e.url)}}},[a("q-item-section",{attrs:{avatar:""}},[a("q-avatar",{attrs:{color:"primary","text-color":"white"}},[a("q-icon",{attrs:{name:"file_copy"}})],1)],1),a("q-item-section",[a("q-item-label",[t._v(t._s(e.name))]),a("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.id))])],1),a("q-item-section",{attrs:{side:""}},[a("q-icon",{attrs:{name:"visibility",color:"grey"}})],1)],1)})),a("printdoc",{ref:"doc"})],2)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"text-h4 xs-text-h4"},[t._v("\n      Договора\n    ")])])}],i=a("0dad"),c=a("6b12"),r={name:"contract",components:{contracts:i["a"],printdoc:c["a"]}},o=r,l=a("2877"),u=a("eebe"),d=a.n(u),p=a("0016"),f=a("66e5"),h=a("4074"),m=a("cb32"),v=a("0170"),_=a("714f"),g=Object(l["a"])(o,n,s,!1,null,null,null);e["default"]=g.exports;d()(g,"components",{QIcon:p["a"],QItem:f["a"],QItemSection:h["a"],QAvatar:m["a"],QItemLabel:v["a"]}),d()(g,"directives",{Ripple:_["a"]})}}]);