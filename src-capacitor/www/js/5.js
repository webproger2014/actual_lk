(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"0105":function(t,e,a){"use strict";var s=a("11b5"),o=a.n(s);o.a},1:function(t,e){},"11b5":function(t,e,a){},1857:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"collection"}},[a("form",{on:{submit:function(e){return e.preventDefault(),t.$_getHouses(e)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-sm-6 col-md q-pa-md"},[a("q-input",{attrs:{filled:"",label:"Кол-во спален"},model:{value:t.filterTools.rooms,callback:function(e){t.$set(t.filterTools,"rooms",e)},expression:"filterTools.rooms"}})],1),a("div",{staticClass:"col-12 col-sm-6 col-md q-pa-md"},[a("q-select",{attrs:{filled:"",options:t.materials,"hide-selected":"",label:"Материал",multiple:"","emit-value":"","map-options":""},scopedSlots:t._u([{key:"option",fn:function(e){var s=e.itemProps,o=e.itemEvents,i=e.opt,n=e.selected,l=e.toggleOption;return[a("q-item",t._g(t._b({},"q-item",s,!1),o),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:t._s(i.label)}})],1),a("q-item-section",{attrs:{side:""}},[a("q-toggle",{attrs:{value:n},on:{input:function(t){return l(i)}}})],1)],1)]}}]),model:{value:t.filterTools.materials,callback:function(e){t.$set(t.filterTools,"materials",e)},expression:"filterTools.materials"}})],1),a("div",{staticClass:"col-12 col-sm-6 col-md q-pa-md"},[a("q-select",{attrs:{filled:"",options:t.floors,label:"Этажность","emit-value":"","map-options":""},scopedSlots:t._u([{key:"option",fn:function(e){var s=e.itemProps,o=e.itemEvents,i=e.opt,n=e.selected,l=e.toggleOption;return[a("q-item",t._g(t._b({},"q-item",s,!1),o),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:t._s(i.label)}})],1),a("q-item-section",{attrs:{side:""}},[a("q-toggle",{attrs:{value:n},on:{input:function(t){return l(i)}}})],1)],1)]}}]),model:{value:t.filterTools.floors,callback:function(e){t.$set(t.filterTools,"floors",e)},expression:"filterTools.floors"}})],1),a("div",{staticClass:"col-12 col-sm-6 col-md q-pa-md"},[a("q-select",{attrs:{filled:"",options:t.garage_type,label:"Тип гаража","emit-value":"","map-options":""},scopedSlots:t._u([{key:"option",fn:function(e){var s=e.itemProps,o=e.itemEvents,i=e.opt,n=e.selected,l=e.toggleOption;return[a("q-item",t._g(t._b({},"q-item",s,!1),o),[a("q-item-section",[a("q-item-label",{domProps:{innerHTML:t._s(i.label)}})],1),a("q-item-section",{attrs:{side:""}},[a("q-toggle",{attrs:{value:n},on:{input:function(t){return l(i)}}})],1)],1)]}}]),model:{value:t.filterTools.garage_type,callback:function(e){t.$set(t.filterTools,"garage_type",e)},expression:"filterTools.garage_type"}})],1),a("div",{staticClass:"col-12 col-sm-6 col-md q-pa-md"},[a("div",{staticClass:"row q-gutter-x-xs"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{filled:"",label:"Площадь от"},model:{value:t.filterTools.square[0],callback:function(e){t.$set(t.filterTools.square,0,e)},expression:"filterTools.square[0]"}})],1),a("div",{staticClass:"col"},[a("q-input",{attrs:{filled:"",label:"Площадь до"},model:{value:t.filterTools.square[1],callback:function(e){t.$set(t.filterTools.square,1,e)},expression:"filterTools.square[1]"}})],1)])]),a("div",{staticClass:"col-12 col-sm-6 col-md q-pa-md"},[a("q-btn",{staticClass:"full-width",staticStyle:{height:"55px"},attrs:{type:"submit",color:"primary",label:"Найти проект"}})],1)])]),a("div",[a("div",{staticClass:"row justify-center"},t._l(t.houses,(function(e,s){return a("div",{key:s,staticClass:"col-xs-12 col-sm-6 col-md-4 col-lg-3 q-pa-md"},[a("a",{staticClass:"linkCard",staticStyle:{cursor:"pointer"},on:{click:function(a){return t.$router.push("/collection/"+e.id)}}},[a("q-card",{staticClass:"my-card"},[a("q-img",{attrs:{src:"https://cdn.vevanta.ru/"+e.images[0].url}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-10 q-pa-md",attrs:{align:"left"}},[a("div",{staticClass:"text-bold fs18 fs20@m",staticStyle:{color:"black"}},[t._v("\n                  "+t._s(e.name)+"\n                ")]),a("div",{staticClass:"fs16",staticStyle:{color:"black"}},[a("q-icon",{staticStyle:{"font-size":"2rem"},attrs:{color:"secondary",name:"aspect_ratio"}}),t._v("\n                  "+t._s(e.square)+" м\n                  "),a("sup",[t._v("2")])],1),a("div",{staticClass:"fs16",staticStyle:{color:"black"}},[t._v("\n                  Размерность x: "+t._s(e.width)+", y: "+t._s(e.length)+"\n                ")]),a("div",{staticClass:"q-mt-md"},[a("q-btn",{attrs:{color:"primary",label:"Смотреть проект"}})],1)])])],1)],1)])})),0),a("div"),a("div",{staticClass:"q-pa-lg flex flex-center"},[a("q-pagination",{attrs:{max:t.pages,"direction-links":!0,"max-pages":10},on:{input:t.$_getHouses},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}})],1)]),a("printdoc",{ref:"doc"})],1)},o=[],i=a("6b12"),n={name:"collection",components:{printdoc:i["a"]},data:function(){return{objectId:[],showObject:!1,current:1,pages:0,filterTools:{count:12,bathrooms:0,garage_type:"",basement:0,roof_type:0,mansard:0,dimension:[],sort:"popular",word:"",materials:[1,2,3,4,5,6,7],floors:0,rooms:3,square:[150,0]},rooms:["1","2","3","4","5"],materials:[{label:"Кирпич",value:1},{label:"Газоблок",value:2},{label:"Керамический блок",value:3},{label:"Керамзитоблок",value:4},{label:"Пеноблок",value:5},{label:"Клееный брус",value:6},{label:"Бревно",value:7}],floors:[{label:"Все",value:0},{label:"1 этаж",value:1},{label:"2 этажа",value:2},{label:"3 этажа",value:3}],garage_type:[{label:"Любой",value:""},{label:"Гараж в доме",value:"2"},{label:"Без гаража",value:"not"},{label:"Отдельный гараж",value:"5"}],houses:[]}},created:function(){this.$_getHouses()},methods:{$_getHouses:function(){var t=this;this.$axios.post("https://api.vevanta.ru/v1/projects",{settings:{page:this.current},filter:this.filterTools}).then((function(e){t.pages=e.data.pages,t.houses=e.data.projects})),window.scrollTo({top:0,behavior:"smooth"})}}},l=n,r=(a("0105"),a("2877")),c=a("eebe"),u=a.n(c),d=a("27f9"),p=a("ddd8"),f=a("66e5"),m=a("4074"),v=a("0170"),g=a("9564"),h=a("9c40"),b=a("f09f"),q=a("068f"),_=a("0016"),w=a("4b7e"),x=a("3b16"),C=Object(r["a"])(l,s,o,!1,null,"53d2a07b",null);e["default"]=C.exports;u()(C,"components",{QInput:d["a"],QSelect:p["a"],QItem:f["a"],QItemSection:m["a"],QItemLabel:v["a"],QToggle:g["a"],QBtn:h["a"],QCard:b["a"],QImg:q["a"],QIcon:_["a"],QCardActions:w["a"],QPagination:x["a"]})},2:function(t,e){},3:function(t,e){},4:function(t,e){},"6b12":function(t,e,a){"use strict";var s,o,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container",attrs:{id:"printdoc"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.ts(e)}}},[a("iframe",{ref:"filePrint",staticStyle:{display:"none"},attrs:{src:""}}),a("q-dialog",{attrs:{maximized:!0,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("q-card",{staticClass:"full-width",staticStyle:{overflow:"hidden"}},[a("q-toolbar",{staticClass:"bg-primary text-white"},[a("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"keyboard_arrow_left"},on:{click:t.closeDialog}}),t._v("\n          Вернуться\n\n          "),a("div",{staticClass:"text-center toolbar-center"},[a("q-btn",{attrs:{flat:"",color:"white",icon:"zoom_out",size:"13px"},on:{click:function(e){t.scale-=.1}}}),t._v("\n            "+t._s((t.scale-1.5).toFixed(1))+"\n            "),a("q-btn",{attrs:{flat:"",color:"white",icon:"zoom_in",size:"13px"},on:{click:function(e){t.scale+=.1}}}),t._v("\n\n            стр "+t._s(t.numPages)+"\n          ")],1)],1),a("div",{staticClass:"pdf-container"},[a("document",t._b({on:{countpages:t.countPages}},"document",{data:t.data,scale:t.scale},!1))],1)],1)],1)],1)},n=[],l=a("967e"),r=a.n(l),c=(a("6762"),a("2fdb"),a("96cf"),a("fa84")),u=a.n(c),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"wrapperiframe",staticClass:"canvas-container text-center"},[a("q-circular-progress",{directives:[{name:"show",rawName:"v-show",value:!t.pages.length,expression:"!pages.length"}],staticClass:"q-ma-md absolute-center",attrs:{indeterminate:"",size:"40px",color:"light-blue-6"}}),t._l(t.pages,(function(e,s){return a("div",{key:s},[a("page",t._b({},"page",{page:e,scale:t.scale},!1))],1)}))],2)},p=[],f=(a("551c"),a("ac6a"),a("cadf"),a("06db"),a("5df3"),a("9511")),m=a.n(f),v=a("f3e3"),g=a.n(v),h={props:["page","scale"],render:function(t){var e=this.canvasAttrs;return t("canvas",{attrs:e})},created:function(){this.viewport=this.page.getViewport({scale:this.scale})},mounted:function(){this.drawPage()},computed:{canvasAttrs:function(){var t=this.viewport,e=t.width,a=t.height,s=this.canvasStyle;return{width:e,height:a,style:s}},canvasStyle:function(){var t=this.actualSizeViewport,e=t.width,a=t.height,s=window.devicePixelRatio||1,o=[e,a].map((function(t){return Math.ceil(t/s)})),i=g()(o,2),n=i[0],l=i[1];return"width: ".concat(n,"px; height: ").concat(l,"px;")},actualSizeViewport:function(){return this.viewport.clone({scale:this.scale-1.5})}},methods:{drawPage:function(){var t=this.viewport,e=this.$el.getContext("2d"),a={canvasContext:e,viewport:t};this.renderTask=this.page.render(a)}}},b=h,q=a("2877"),_=Object(q["a"])(b,s,o,!1,null,"1300dd0b",null),w=_.exports,x={props:["data","scale"],components:{page:w},data:function(){return{pdf:void 0,pages:[]}},created:function(){this.fetchPDF()},methods:{fetchPDF:function(){var t=this;if(this.data){var e={withCredentials:!1};this.data.includes(".pdf")?e["url"]=this.data:e["data"]=atob(this.data),m.a.getDocument(e).promise.then((function(e){t.pdf=e}))}}},watch:{data:function(){this.fetchPDF()},pdf:function(t){var e=this;this.pages=[],this.$emit("countpages",t.numPages);var a=this.$_.range(1,t.numPages+1).map((function(e){return t.getPage(e)}));Promise.all(a).then((function(t){return e.pages=t}))}}},C=x,y=a("eebe"),k=a.n(y),P=a("58ea"),T=Object(q["a"])(C,d,p,!1,null,"5dc4132c",null),$=T.exports;k()(T,"components",{QCircularProgress:P["a"]});var Q={name:"printdoc",components:{document:$},data:function(){return{dialog:!1,numPages:void 0,srcPdf:"",percentLoad:"",indexLoad:1,scale:3,data:""}},methods:{print:function(t){var e=this.$refs.filePrint;this.srcPdf=encodeURIComponent(t),e.contentWindow.focus(),e.onload=function(){e.contentWindow.print()}},closeDialog:function(){this.dialog=!1,this.data=null,this.numPages=void 0,this.scale=3},open:function(t,e){var a=this;null===t.target.getAttribute("nopen")&&(this.srcPdf=encodeURIComponent(e),this.dialog=!0,this.$nextTick((function(){setTimeout((function(){a.$_loadPdf(e)}),500)})))},$_loadPdf:function(t){var e=this;return u()(r.a.mark((function a(){return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.includes("http")?e.$axios.post("parse/file/pdf",{src:t}).then((function(t){e.data=t.data})):e.data=t;case 1:case"end":return a.stop()}}),a)})))()},countPages:function(t){this.numPages=t}}},S=Q,j=(a("8989"),a("24e8")),z=a("f09f"),I=a("65c6"),O=a("9c40"),D=Object(q["a"])(S,i,n,!1,null,"86849036",null);e["a"]=D.exports;k()(D,"components",{QDialog:j["a"],QCard:z["a"],QToolbar:I["a"],QBtn:O["a"]})},8989:function(t,e,a){"use strict";var s=a("9f00"),o=a.n(s);o.a},"9f00":function(t,e,a){}}]);